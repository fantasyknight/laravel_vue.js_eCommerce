$(document).ready(function(){"use strict";$(".btn-tag").on("click",function(e){$("#tags-input").data("tagsinput").add(e.target.innerHTML)}),$(".submit-button").click(function(e){$(".note-editable").text()||(new PNotify({title:"Error",text:"Please input description.",type:"error",addclass:"notification-error",icon:"fas fa-times"}),e.stopPropagation(),e.preventDefault());var i=$("#treeCheckbox").jstree().get_checked(),t=$(".note-editable").html(),a=[];$(".mg-post-images .thumbnail .thumb-preview .thumb-image").each(function(){a.push($(this).data("id"))}),$("#categories").val(i),$("#description").val(t),$("#post-media-images").val(a)});var e;$(".delete-button").click(function(){e=$(this).data("id"),$.magnificPopup.open({items:{src:"#delete-confirm-modal"},type:"inline"})}),$(".modal-confirm").click(function(){$.ajax({url:baseUrl+"/admin/posts/"+e,type:"DELETE",headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")},success:function(){location.href=baseUrl+"/admin/posts/"},error:function(e){new PNotify({title:"Error",text:401==e.status?e.responseText:"Error found while database operation.",type:"error",addclass:"notification-error",icon:"fas fa-times"})}})}),$(".modal-dismiss").click(function(){$.magnificPopup.close()}),$(".modal-sizes").magnificPopup({type:"inline",preloader:!1,modal:!0});var i=new Dropzone("#dropzone-form-image",{url:baseUrl+"/admin/media",method:"post",addRemoveLinks:!0,headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")},init:function(){if($("#dropzone-form-image").hasClass("dz-filled")){Dropzone.forElement("#dropzone-form-image").displayExistingFile({name:"Image Name",size:12345},"img/products/product-1.jpg")}$("#dropzone-form-image").addClass("dropzone initialized")}});i.on("success",function(e){$("#gallery .no-results")&&$("#gallery .no-results").remove(),e.previewElement.setAttribute("data-id",JSON.parse(e.xhr.response).id);var i='<div class="col-6 col-xs-4 col-sm-3 col-md-1-5 col-lg-2 col-xl-1-8 col-xxl-1-10">                        <div class="thumbnail">                            <div class="thumb-preview">                                <div class="centered">                                    <a class="thumb-image" href="'+baseUrl+"/storage/"+JSON.parse(e.xhr.response).copy_link+'">                                        <img src="'+baseUrl+"/storage/"+JSON.parse(e.xhr.response).copy_link+'" class="img-fluid" alt="Project" />                                    </a>                                </div>                            <div class="mg-thumb-options">                                <div class="mg-zoom">                                    <i class="fas fa-search"></i>                                </div>                            <div class="mg-toolbar">                                <div class="mg-option checkbox-custom checkbox-inline">                                    <input type="checkbox" id="file_'+JSON.parse(e.xhr.response).id+'" value="1" data-id="'+JSON.parse(e.xhr.response).id+'" />                                    <label for="file_'+JSON.parse(e.xhr.response).id+'">Select</label>                                </div>                            </div>                        </div>                    </div>                </div>            </div>';$("#gallery .row.mg-files").prepend(i)}),i.on("removedfile",function(e){var i=e.previewElement.getAttribute("data-id");i&&$.ajax({url:baseUrl+"/admin/media/"+i,type:"DELETE",headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")}})}),$("#gallery").on("change",".mg-option input[type=checkbox]",function(e){var i=$(this).parents(".thumbnail");$(this).is(":checked")?i.addClass("thumbnail-selected"):i.removeClass("thumbnail-selected")}),$("#gallery").on("mouseenter",".thumbnail",function(){var e=$(this).find(".mg-toggle");e.parent().hasClass("open")&&e.dropdown("toggle")}),$(".mg-option input[type=checkbox]").on("change",function(e){var i=$(this).parents(".thumbnail");$(this).is(":checked")?i.addClass("thumbnail-selected"):i.removeClass("thumbnail-selected")}),$(".modal-set").click(function(){var e=$(".media-gallery .mg-post-images");$("#gallery .thumbnail-selected").each(function(){var i=document.createElement("div"),t=$(this),a=t.find("img").attr("src"),s=t.find("input[type=checkbox]").data("id");0==e.parent().find('[data-id="'+s+'"]').length&&($(i).addClass("col-6 col-md-4 col-lg-3"),$(i).append('                    <div class="thumbnail">                        <div class="thumb-preview">                            <div class="centered">                                <a class="thumb-image" href="" data-id="'+s+'">                                    <img src="'+a+'" class="img-flulid" alt="Project">                                </a>                            </div>                            <div class="mg-thumb-options">                                <div class="mg-remove"><i class="fas fa-times"></i></div>                            </div>                        </div>                    </div>                '),e.append(i))}),$("#gallery .thumbnail-selected").length>0?($(".category-image img").attr("src",$("#gallery .thumbnail-selected img").attr("src")),$("#category-media-image").val($("#gallery .thumbnail-selected .mg-option input").data("id"))):($(".category-image img").prop("src",null),$("#category-media-image").val("")),$.magnificPopup.close()}),$(".ecommerce-form").on("click",".mg-remove",function(){$(this).closest(".thumbnail").parent().remove()})});