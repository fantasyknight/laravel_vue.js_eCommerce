$(document).ready(function(){var e="banner-image";$(".modal-sizes").magnificPopup({type:"inline",preloader:!1,modal:!0}),$(".modal-sizes").click(function(){e=$(this).data("index")}),$(".modal-dismiss").click(function(){$.magnificPopup.close()});var a=new Dropzone("#dropzone-form-image",{url:baseUrl+"/admin/media",method:"post",addRemoveLinks:!0,headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")},init:function(){if($("#dropzone-form-image").hasClass("dz-filled")){Dropzone.forElement("#dropzone-form-image").displayExistingFile({name:"Image Name",size:12345},"img/products/product-1.jpg")}$("#dropzone-form-image").addClass("dropzone initialized")}});a.on("success",function(e){e.previewElement.setAttribute("data-id",JSON.parse(e.xhr.response).id);var a='<div class="col-6 col-xs-4 col-sm-3 col-md-1-5 col-lg-2 col-xl-1-8 col-xxl-1-10"><div class="thumbnail"><div class="thumb-preview"><div class="centered"><a class="thumb-image" href="'+baseUrl+"/storage/"+JSON.parse(e.xhr.response).copy_link+'"><img src="'+baseUrl+"/storage/"+JSON.parse(e.xhr.response).copy_link+'" class="img-fluid" alt="Project"></a></div><div class="mg-thumb-options"><div class="mg-zoom"><i class="fas fa-search"></i></div><div class="mg-toolbar"><div class="mg-option checkbox-custom checkbox-inline"><input type="checkbox" id="file_'+JSON.parse(e.xhr.response).id+'" value="1" data-id="'+JSON.parse(e.xhr.response).id+'"><label for="file_'+JSON.parse(e.xhr.response).id+'">Select</label></div></div></div></div></div></div>';$("#gallery .row.mg-files").prepend(a)}),a.on("removedfile",function(e){var a=e.previewElement.getAttribute("data-id");a&&$.ajax({url:baseUrl+"/admin/media/"+a,type:"DELETE",headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")}})}),$(".ecommerce-form").submit(function(e){e.preventDefault();var a=$(".note-editable").html();$.ajax({url:$(this).attr("action"),type:"PUT",data:{banner_image:$("#banner-image").val(),profile_image:$("#profile-image").val(),phone:$("#phone").val(),store_name:$("#store-name").val(),toc:a,paypal_email:$("#paypal-email").val()},headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")},success:function(){new PNotify({title:"Success",text:"Vendor setting successfully saved.",type:"success",addclass:"notification-success",icon:"fas fa-check"})},error:function(e){new PNotify({title:"Error",text:401==e.status?e.responseText:"Error found while database operation.",type:"error",addclass:"notification-error",icon:"fas fa-times"})}})}),$("#gallery").on("change",".mg-option input[type=checkbox]",function(e){var a=$(this).parents(".thumbnail");$(this).is(":checked")?($("#gallery .thumbnail-selected").removeClass("thumbnail-selected"),$("#gallery input:checked").prop("checked",!1),$(this).prop("checked","true"),a.addClass("thumbnail-selected")):a.removeClass("thumbnail-selected")}),$("#gallery").on("mouseenter",".thumbnail",function(){var e=$(this).find(".mg-toggle");e.parent().hasClass("open")&&e.dropdown("toggle")}),$(".modal-set").click(function(){if($("#gallery .thumbnail-selected").length>0){var a=$("#gallery .thumbnail-selected img").attr("src"),i=a.slice(0,a.lastIndexOf("-"))+a.slice(a.lastIndexOf("."));"banner-image"==e?$(".vendor-banner").css("background-image",'url("'+i+'")'):$(".pro-image").prop("src",a),$("#"+e).val($("#gallery .thumbnail-selected .mg-option input").data("id"))}else"pro-image"==e&&$("#"+e).val("");$.magnificPopup.close()})});