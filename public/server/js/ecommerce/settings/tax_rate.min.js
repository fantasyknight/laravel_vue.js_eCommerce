$(document).ready(function(){"use strict";var t;$(".filter-by").change(function(){$(".ecommerce-tax-rate-form").submit()}),$(".select-all").on("change",function(t){$(this).is(":checked")?$(".table tbody .checkbox-style-1").prop("checked",!0):$(".table tbody .checkbox-style-1").prop("checked",!1)}),$(".bulk-action-apply").click(function(e){e.preventDefault();var a=$(".table tbody :checked");t=[];for(var r=0;r<a.length;r++)t.push(a.eq(r).data("id"));0==t.length||"delete"!=$(".bulk-action").val()?new PNotify({title:"Warning",text:"It will not work.",type:"error",addclass:"notification-warning",icon:"fas fa-exclamation"}):$.magnificPopup.open({items:{src:"#delete-confirm-modal"},type:"inline"})}),$(".remove-row").click(function(){var e=$(this).data("id");(t=[]).push(e),$.magnificPopup.open({items:{src:"#delete-confirm-modal"},type:"inline"})}),$(".modal-add, .edit-tax-rate").magnificPopup({type:"inline",preloader:!1,modal:!0}),$("#tax-rate-add-form").submit(function(t){t.preventDefault(),$(this).data("id")||(new PNotify({title:"Error",text:"Please save tax rate first",type:"error",addclass:"notification-error",icon:"fas fa-times"}),$.magnificPopup.close());var e="POST",a=baseUrl+"/admin/ecommerce/settings/tax/tax-rate";$(this).data("rate-id")&&(e="PUT",a=baseUrl+"/admin/ecommerce/settings/tax/tax-rate/"+$(this).data("rate-id")),$.ajax({url:a,type:e,data:{name:$("#name").val(),country:$("#country").val(),state:$("#state").val(),postcode:$("#postcode").val(),city:$("#city").val(),rate:$("#rate").val(),is_shipping:$("#is_shipping").prop("checked"),tax_type_id:$(this).data("id")},headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")},success:function(){location.reload()},error:function(t){new PNotify({title:"Error",text:401==t.status?t.responseText:"Error found while database operation.",type:"error",addclass:"notification-error",icon:"fas fa-times"})}})}),$(".edit-tax-rate").click(function(){var t=$(this).closest("tr").children(),e=t.eq(1).text();"*"==e?$("#name").attr("placeholder","*"):$("#name").val(e),"*"==(e=t.eq(2).text())?$("#country").attr("placeholder","*"):$("#country").val(e),"*"==(e=t.eq(3).text())?$("#state").attr("placeholder","*"):$("#state").val(e),"*"==(e=t.eq(4).text())?$("#postcode").attr("placeholder","*"):$("#postcode").val(e),"*"==(e=t.eq(5).text())?$("#city").attr("placeholder","*"):$("#city").val(e),"*"==(e=t.eq(6).text())?$("#rate").attr("placeholder","*"):$("#rate").val(e),$("#is_shipping").prop("checked","Enabled"==t.eq(7).text()),$("#tax-rate-add-form").data("rate-id",$(this).data("id"))}),$(".modal-confirm").click(function(){$.ajax({url:baseUrl+"/admin/ecommerce/settings/tax/tax-rate/bulk",type:"DELETE",data:{data:t},headers:{"X-CSRF-TOKEN":$("#csrf-token").attr("content")},success:function(){location.reload()},error:function(t){new PNotify({title:"Error",text:401==t.status?t.responseText:"Error found while database operation.",type:"error",addclass:"notification-error",icon:"fas fa-times"})}})}),$(".modal-dismiss").click(function(){$.magnificPopup.close()})});